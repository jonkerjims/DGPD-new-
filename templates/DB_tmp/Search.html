<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>DGPD</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css">
    <link rel="stylesheet" href="/static/css/DB_CSS/home.css">
</head>

<body>

<div class="layui-container" style="min-width:1140px;">
    <div class="layui-row" id="header">
        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 layui-col-lg12" id="banner"></div>

        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 layui-col-lg12" id="bar">
            <ul class="layui-nav" lay-filter="" id="navbar">
                <li class="layui-nav-item ">
                    <a href="../index">Home</a>
                </li>
                <li class="layui-nav-item">
                    <a href="../About">About</a>
                </li>
                <li class="layui-nav-item">
                    <a href="../Download">Download</a>
                </li>
                <li class="layui-nav-item">
                    <a href="../Submit">Submit</a>
                </li>
                <li class="layui-nav-item">
                    <a href="../Contact">Contact</a>
                </li>
            </ul>

        </div>

    </div>

    <div class="layui-row" id="bodyer">
        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 layui-col-lg12" style="margin:20px 0">
            <blockquote class="layui-elem-quote">
                <i class="layui-icon">&#xe602;</i>
                <i id="quote">></i>
            </blockquote>


            <fieldset class="layui-elem-field layui-field-title" style="margin-bottom:5px;margin-top:20px;">
                <legend>Search Result</legend>
            </fieldset>

            {#---------------------------------------------------------------------------------------------表格部分#}
            <table class="layui-hide" id="DataFrame" lay-filter="test"></table>
            {#---------------------------------------------------------------------------------------------基因图部分#}
            <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 layui-col-lg12"
                 style="overflow-x:auto;text-align:center"></div>
            {#---------------------------------------------------------------------------------------------页脚部分#}
            <div class="layui-row" id="footer">
                <div class="copyright">
                    Copyright©
                    <a class="ow" href="https://www.ahau.edu.cn/" target="_blank">AnHui Argricultural University</a>
                    ©All
                    Rights
                    Reserved.
                </div>
            </div>
        </div>
    </div>
</div>

{#======================================templates自定义模板=============================================================#}
{% verbatim %}
<script type="text/html" id="display_gene_name">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"      class="layui-table-link" style="color:#009688;" title="{{d.gene_name}}">{{ d.gene_name}} </a>
</script>
<script type="text/html" id="display_organism">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"       class="layui-table-link" style="color:#009688;" title="{{d.organism}}">{{ d.organism}} </a>
</script>
<script type="text/html" id="display_evidece_level">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"       class="layui-table-link" style="color:#009688;" title="{{d.evidece_level}}">{{ d.evidece_level}} </a>
</script>
<script type="text/html" id="display_intron">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"       class="layui-table-link" style="color:#009688;" title="{{d.intron}}">{{ d.intron}} </a>
</script>
<script type="text/html" id="display_signal_peptide">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"       class="layui-table-link" style="color:#009688;" title="{{d.signal_peptide}}">{{ d.signal_peptide}}</a>
</script>
<script type="text/html" id="display_tmhmm">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"       class="layui-table-link" style="color:#009688;" title="{{d.tmhmm}}">{{ d.tmhmm}} </a>
</script>
<script type="text/html" id="display_pmid">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"       class="layui-table-link" style="color:#009688;" title="{{d.pmid}}">{{ d.pmid}} </a>
</script>
<script type="text/html" id="display_molecular_weight">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"       class="layui-table-link" style="color:#009688;" title="{{d.molecular_weight}}">{{ d.molecular_weight}}</a>
</script>
<script type="text/html" id="display_domains">
    <a  href="../Details?organism={{ d.organism }}&gene_name={{ d.gene_name }}&evidece_level={{ d.evidece_level }}&intron={{ d.intron }}&signal_peptide={{ d.signal_peptide }}&tmhmm={{ d.tmhmm }}&pmid={{ d.pmid }}&molecular_weight={{ d.molecular_weight }}&domains={{ d.domains }}"       class="layui-table-link" style="color:#009688;" title="{{d.domains}}">{{ d.domains}} </a>
</script>
{% endverbatim %}


{#======================================templates自定义模板=============================================================#}
<script src="/static/js/jquery-1.9.1.min.js"></script>
<script src="/static/layui/layui.all.js"></script>
<script>
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }
    function replace_add(str) {
        if(str){
            if (str.indexOf('+') != -1){
                str = str.replace('+',' ')
                return str;
            }else{
                return str;
            }
        }
    }


    gene_name = replace_add(getQueryString("gene_name"))
    //alert('gene_name'+gene_name)

    organism = replace_add(getQueryString("organism"))
    //alert('organism'+organism)

    userInput = replace_add(getQueryString("userInput"))
    //alert('userInput'+userInput)

    get_url();

    function get_url() {
        var str = '';
        str += ((gene_name != null && gene_name != '') ? ('<b>Gene_name: &nbsp;</b>' + gene_name + '; ') : '');
        str += ((organism != null && organism != '') ? ('<b>Organism: &nbsp;</b>' + organism + '; ') : '');
        str += ((userInput != null && userInput != '') ? ('<b>userInput: &nbsp;</b>' + userInput + '; ') : '');
        document.getElementById('quote').innerHTML = str;
    }

    var table = layui.table;
    table.render({
        elem: '#DataFrame',
        url: '../SearchCol/',
        page: {
            layout: ['prev', 'page', 'next', 'skip', 'limit', 'count'],
            limit: 10,
            limits: [10, 20, 30, 50, 100],
            hash: 'page',
            curr: location.hash.replace('#!page=', ''),
        },
        request: {
            pageName: 'page',
            limitName: 'limit',
        },
        where: {
            gene_name: gene_name,
            organism: organism,
            userInput: userInput,
        },

        cols: [[
            {field: 'gene_name', title: 'Gene_name', width:130, sort: true, templet:'#display_gene_name'}
          ,{field: 'organism', title: 'Organism', width:130, sort: true, templet:'#display_organism'}
          ,{field: 'evidece_level', title: 'Evidece_level', width:130, sort: false, templet:'#display_evidece_level'}
          ,{field: 'intron', title: 'Intron', width:80, templet:'#display_intron'}
          ,{field: 'signal_peptide', title: 'Signal_Peptide', width: 140, templet:'#display_signal_peptide'}
          ,{field: 'tmhmm', title: 'TMHMM', width: 100, sort: false, templet:'#display_tmhmm'}
          ,{field: 'pmid', title: 'Pmid', width: 80, sort: false, templet:'#display_pmid'}
          ,{field: 'molecular_weight', title: 'Molecular_Weight', width: 200, templet:'#display_molecular_weight'}
          ,{field: 'domains', title: 'Domains', sort: false, templet:'#display_domains'}
        ]],

    })

</script>
</body>

</html>
